name: Keep Render Server Alive

# 14ë¶„ë§ˆë‹¤ /health ì—”ë“œí¬ì¸íŠ¸ë¥¼ pingí•´ì„œ ì„œë²„ë¥¼ ê¹¨ì–´ìˆê²Œ í•©ë‹ˆë‹¤
on:
  schedule:
    # 14ë¶„ë§ˆë‹¤ ì‹¤í–‰ (Renderì˜ 15ë¶„ sleep íƒ€ì´ë¨¸ ë°©ì§€)
    - cron: '*/14 * * * *'

  # ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥í•˜ê²Œ
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Health Endpoint
        run: |
          echo "ğŸ“ Pinging AIX-Boost server..."

          # /health ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œ
          response=$(curl -s -o /dev/null -w "%{http_code}" https://aix-boost-backend.onrender.com/health)

          if [ $response -eq 200 ]; then
            echo "âœ… Server is alive! (HTTP $response)"
          else
            echo "âš ï¸ Server responded with HTTP $response"
            exit 1
          fi

      - name: Check Scheduler Status
        run: |
          echo "ğŸ“Š Checking scheduler status..."

          # ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ í™•ì¸
          curl -s https://aix-boost-backend.onrender.com/scheduler/status | jq '.'
        continue-on-error: true
